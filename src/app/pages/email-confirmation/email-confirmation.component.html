<login-layout>
  <div class="row">
    <div class="login-container">
      <div class="login-wrapper">
        <div class="login-left">
          <div class="d-flex flex-column align-items-center">
            <div class="progress custom-progress" style="width: 100%">
              <div
                class="progress-bar progress-bar-striped bg-success"
                role="progressbar"
                style="width: 0%"
                aria-valuenow="25"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
            <p class="progress-completed-text">0% Complete</p>
          </div>
          <h4>Create an Account</h4>
          <div class="login-form">
            @if (error()) {
              <p class="text-danger form-error">{{ error() }}</p>
            }
            <form
              class="Restaurant_Webportal_Email_Confirmation"
              [formGroup]="emailConfirmationFormGroup"
              (ngSubmit)="onSubmit()"
            >
              <!-- First Name -->
              <div class="form-group">
                <input
                  [class.error]="(submitted() || first_name?.dirty) && first_name?.invalid"
                  type="text"
                  formControlName="first_name"
                  class="login-control"
                  placeholder="First name"
                />
                @if ((submitted() || first_name?.dirty) && first_name?.invalid) {
                  @if (first_name?.errors?.['required']) {
                    <span class="text-danger">First name is required</span>
                  }
                }
              </div>

              <!-- Last Name -->
              <div class="form-group">
                <input
                  [class.error]="(submitted() || last_name?.dirty) && last_name?.invalid"
                  type="text"
                  formControlName="last_name"
                  class="login-control"
                  placeholder="Last name"
                />
                @if ((submitted() || last_name?.dirty) && last_name?.invalid) {
                  @if (last_name?.errors?.['required']) {
                    <span class="text-danger">Last name is required</span>
                  }
                }
              </div>

              <!-- Email -->
              <div class="form-group">
                <input
                  [class.error]="(submitted() || email?.dirty) && email?.invalid"
                  type="email"
                  formControlName="email"
                  class="login-control"
                  placeholder="Email address"
                />
                @if ((submitted() || email?.dirty) && email?.invalid) {
                  @if (email?.errors?.['required']) {
                    <span class="text-danger">Email is required</span>
                  }
                  @if (email?.errors?.['email']) {
                    <span class="text-danger my-0">Email is invalid</span>
                  }
                }
              </div>

              <!-- Industry Select -->
              <div class="form-group">
                <select
                  [class.error]="(submitted() || accountType?.dirty) && accountType?.invalid"
                  (change)="handleSelectIndustry($event)"
                  class="login-control"
                >
                  <option value="">Please select your industry</option>
                  @for (industry of industries; track industry.key) {
                    <option [value]="industry.key">{{ industry.value }}</option>
                  }
                </select>
                @if (accountType?.invalid && (submitted() || accountType?.dirty)) {
                  <span class="text-danger">Please select account type.</span>
                }
              </div>

              <!-- Terms Agreement -->
              <div class="form-check checkbox-wrapper mt-0 flex-row">
                <input
                  type="checkbox"
                  class="form-check-input"
                  style="zoom: 1.2"
                  id="exampleCheck1"
                  (change)="agreeTermsCondition($event)"
                />
                <label class="form-check-label padding-left-mobile mb-0 ms-2" for="exampleCheck1">
                  I agree to the
                  <a href="https://www.getkexy.com/terms-conditions/" target="_blank" class="text-small">
                    Terms of Use
                  </a>
                  and
                  <a href="https://www.getkexy.com/privacy-policy/" class="text-small" target="_blank">
                    Cookie & Privacy Policy
                  </a>
                </label>
              </div>
              @if (submitted() && !termsAgreement()) {
                <span class="text-danger">Please accept the agreement</span>
              }

              <!-- Marketing Agreement -->
              <div class="form-check checkbox-wrapper flex-row mt-2">
                <input
                  type="checkbox"
                  style="zoom: 1.2"
                  class="form-check-input"
                  id="marketingAgree"
                  [checked]="marketingAgreement()"
                  (change)="marketingAgreement.set($any($event.target).checked)"
                />
                <label class="form-check-label padding-left-mobile mb-0 ms-2" for="marketingAgree">
                  I agree to receive marketing communications.
                </label>
              </div>

              <!-- Submit Button -->
              <div class="form-group">
                <button class="kexy-button kx-create-btn" type="submit" name="submit" id="submit">
                  @if (isWaitingFlag()) {
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                  }
                  Confirm
                </button>
              </div>

              <!-- Login Link -->
              <div class="form-group text-center">
                <p class="text-center d-inline-block already-have-an-account-text pt-3">
                  Already have an account?
                  <a style="color: #007bff" routerLink="/login">Login</a>
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</login-layout>

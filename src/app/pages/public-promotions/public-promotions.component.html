<div class="public-promotion-page">
  <div *ngIf="loading" class="loading">
    <i class="fa fa-refresh fa-spin me-2" aria-hidden="true"></i>
    Please wait....
  </div>

  <div *ngIf="!loading" class="desktop-preview-content-wrap">
    <div class="top-mid-section-wrap">
      <div class="top-area">

        <!--For Mobile View-->
        <div class="campaign-type-logo-and-title for-mobile">
          <div class="title-and-offer-text">
            <p class="title">{{ productText }}</p>
            <p *ngIf="promotion.campaign_detail.start_date" class="offer-text">
              {{ promotion.campaign_detail.start_date | date : "MM/dd/yy" }}
              - {{ promotion.campaign_detail.end_date | date : "MM/dd/yy" }}
            </p>
          </div>

          <div
            class="kexy-tag"
          >
            <span *ngIf="promotion.campaign_detail.campaign_type === constants.DEAL_WITH_PRICE">Deal</span>
            <span *ngIf="promotion.campaign_detail.campaign_type === constants.INFORMATIVE">Informative</span>
            <span *ngIf="promotion.campaign_detail.campaign_type === constants.FEATURED_PRODUCT">Featured Product</span>
            <span
              *ngIf="promotion.campaign_detail.campaign_type === constants.LISTING_OF_PRODUCT">{{ constants.LIST_PRODUCT_ON_PLATFORM }}</span>
            <span
              *ngIf="promotion.campaign_detail.campaign_type === constants.ANNOUNCEMENT_KEY">{{ constants.ANNOUNCEMENT_VALUE }}</span>
          </div>
        </div>
        <!--End-->

        <div class="asset-and-buttons">
          <div class="img-wrap" [style.backgroundImage]="'url(' + getImageUrl() + ')'">
            <div class="heart-icon-wrap">
              <div class="save-favorite-btn-wrap">
                <i class="fa fa-heart-o" aria-hidden="true"></i>
              </div>
            </div>
          </div>
          <div class="buttons-wrap">
            <div class="btn-wrap mb-2">
              <app-kexy-button
                [disabled]="!promotion.campaign_detail.sales_sheet"
                label="Info Sheet"
                bgColor="#E7F6FE"
                textColor="#0047CC"
                iconLeft="fa-cube"
                (click)="productInfoSheetBtnClick()"
              ></app-kexy-button>
            </div>
            <div class="btn-wrap">
              <app-kexy-button
                [disabled]="!promotion.campaign_detail.campaign_video"
                label="Play Video"
                bgColor="#E7F6FE"
                textColor="#0047CC"
                iconLeft="fa-youtube-play"
                (click)="playVideoBtnClick()"
              ></app-kexy-button>
            </div>
          </div>
        </div>
        <div class="other-content">
          <!--For Desktop View-->
          <div class="campaign-type-logo-and-title for-desktop">
            <div class="title-and-offer-text">
              <p class="title">{{ productText }}</p>
              <p *ngIf="promotion.campaign_detail.start_date" class="offer-text">
                {{ promotion.campaign_detail.start_date | date : "MM/dd/yy" }}
                - {{ promotion.campaign_detail.end_date | date : "MM/dd/yy" }}
              </p>
            </div>

            <div
              class="kexy-tag"
            >
              <span *ngIf="promotion.campaign_detail.campaign_type === constants.DEAL_WITH_PRICE">Deal</span>
              <span *ngIf="promotion.campaign_detail.campaign_type === constants.INFORMATIVE">Informative</span>
              <span
                *ngIf="promotion.campaign_detail.campaign_type === constants.FEATURED_PRODUCT">Featured Product</span>
              <span
                *ngIf="promotion.campaign_detail.campaign_type === constants.LISTING_OF_PRODUCT">{{ constants.LIST_PRODUCT_ON_PLATFORM }}</span>
              <span
                *ngIf="promotion.campaign_detail.campaign_type === constants.ANNOUNCEMENT_KEY">{{ constants.ANNOUNCEMENT_VALUE }}</span>
            </div>
          </div>
          <!--End-->

          <div class="campaign-price-savings-specs-info-wrap">
            <div class="info-row">
              <p class="left-text">Contact Person</p>
              <p class="right-text">{{ contactPerson }}</p>
            </div>
            <div class="info-row"
                 [style.border]="promotion.campaign_detail.campaign_type === constants.FEATURED_PRODUCT ? 'none' : ''">
              <p class="left-text">Price</p>
              <p *ngIf="promotion.campaign_detail.price" class="right-text">{{ promotion.campaign_detail.price }}</p>
              <p *ngIf="!promotion.campaign_detail.price" class="right-text">N/A</p>
            </div>
            <div *ngIf="promotion.campaign_detail.campaign_type !== constants.FEATURED_PRODUCT"
                 class="info-row border-0">
              <p class="left-text">Estimated Savings</p>
              <p *ngIf="promotion.campaign_detail.estimated_savings"
                 class="right-text">{{ promotion.campaign_detail.estimated_savings }}</p>
              <p *ngIf="!promotion.campaign_detail.estimated_savings" class="right-text">N/A</p>
            </div>
          </div>
          <div class="validation-info-wrap">
            <div class="contents">
              <p *ngIf="promotion.campaign_detail.start_date" class="date-range-text">
                Valid from {{ promotion.campaign_detail.start_date | date : "MMM d, y" }} - till
                {{ promotion.campaign_detail.end_date | date : "MMM d, y" }}
              </p>
              <p class="offer-text">{{ promotionTitleText }}</p>
            </div>
            <div class="img-wrap">
              <img src="/assets/images/hand-mike.png" />
            </div>
          </div>
        </div>
      </div>
      <div class="middle-section">
        <div *ngIf="promotionDetailsText" class="area-wrap">
          <app-label-and-value label="Details"
                               [value]="promotionDetailsText ? promotionDetailsText : 'N/A'"></app-label-and-value>
        </div>
        <div *ngIf="promotion.campaign_detail.product_knowledge" class="area-wrap">
          <app-label-and-value
            [label]="promotion.campaign_detail.campaign_type === constants.LISTING_OF_PRODUCT ? 'Service Description' : 'Product Description'"
            [value]="promotion.campaign_detail.product_knowledge"></app-label-and-value>
        </div>
        <div *ngIf="promotion.campaign_detail.additional_info" class="area-wrap">
          <app-label-and-value label="Additional Info"
                               [value]="promotion.campaign_detail.additional_info || 'N/A'"></app-label-and-value>
        </div>
      </div>
    </div>

    <div class="bottom-section">
      <div class="btn-wrap" *ngFor="let button of buttonsList; let i = index;">
        <app-kexy-button [label]="button.label" [bgColor]="i === 0 ? '' : 'transparent'"
                         [borderColor]="i === 0 ? '' : 'black'" [textColor]="i === 0 ? '' : 'black'" iconSize="small"
                         align="center" (click)="handleBottomBtnClick(button)"></app-kexy-button>
      </div>
    </div>
    <div class="margin-bottom-for-mobile-screen"></div>
  </div>
</div>

<ng-template #sendEmailModal let-c="close" let-d="dismiss">
  <div class="send-email-modal-content">
    <div class="title-and-close-btn">
      <p class="modal-of-title">Send an email</p>
      <div class="close-icon-wrap" (click)="c()">
        <img src="/assets/images/close-icon.png" alt="close-icon" />
      </div>
    </div>
    <div class="send-email-modal-body">
      <div class="top-area">
        <div class="text-content">
          <div class="user-info d-flex align-items-center" *ngIf="selectedConversation">
            <brand-convo-avatar
              text="IH"
              [color]="'blue'"
            ></brand-convo-avatar>
            <span class="m-2">
                <strong>
                  {{ selectedConversation.receiver_details.first_name }}
                  {{ selectedConversation.receiver_details.last_name }}
                </strong>
                <br>
                <span style="font-size: 14px">
                  {{ selectedConversation.receiver_details.jobTitle }} at
                  <a
                    [href]="selectedConversation.receiver_details.companyWebsite"
                    target="_blank"
                    class="company-name">
                    {{ selectedConversation.receiver_details.companyName }}
                  </a>
                </span>
              </span>
          </div>
        </div>
      </div>

      <div class="inputs-wrap">
        <div class="label-and-input">
          <label class="input-label-text">Full Name</label>
          <input class="form-control" type="text" [(ngModel)]="userFullName" />
          <div *ngIf="submitted && !userFullName">
            <error-message-card message="Please enter valid data."></error-message-card>
          </div>
        </div>
        <div class="label-and-input">
          <label class="input-label-text">Your Email Address</label>
          <input class="form-control" type="email" [(ngModel)]="userEmailAddress" />
          <div *ngIf="submitted && !userEmailAddress">
            <error-message-card message="Please enter valid data."></error-message-card>
          </div>
        </div>
      </div>

      <div class="text-area">
        <label class="input-label-text">Email Body</label>
        <div class="textarea-wrap">
          <kexy-rich-editor
            [content]="emailContent"
            [onContentUpdate]="onEmailContentChange">
          </kexy-rich-editor>
        </div>
        <div *ngIf="!(emailContent || updatedEmailContent) && submitted">
          <error-message-card message="Please enter valid data."></error-message-card>
        </div>
      </div>
      <div class="bottom-btn-area">
        <div class="btn-wrap">
          <app-kexy-button
            (click)="addMessageToConversation()"
            [disabled]="loading"
            [label]="loading ? 'Please wait...' : 'Send email' "
            [iconLeft]="loading ? 'fa-refresh fa-spin' : 'fa-paper-plane-o'"
          ></app-kexy-button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
